<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>EasyHttpRPC/Filer</title>
    <script type='text/javascript'>
        function pathChanged() {
            const select = document.getElementById('pathType');
            if (!select.value || select.value.length === 0) {
                return;
            }
            window.location.pathname = `/filer/${select.value}`;
        }

        function onLinkDir(e) {
            const name = e.target.textContent;
            window.location.pathname += `/${encodeURIComponent(name)}`;
        }

        function onLinkFile(e) {
            const name = e.target.textContent;
            const url = new URL(window.location.href);
            for (let key of url.searchParams.keys()) {
                url.searchParams.delete(key);
            }
            url.href += `/${encodeURIComponent(name)}`;
            const a = document.createElement('a');
            document.body.appendChild(a);
            a.download = name;
            a.href = url.href;
            a.click();
            a.remove();
        }

    </script>
    <style>
        body {
            padding: 20px 40px;
        }
    </style>
</head>
<body>
<h1>EasyHttpRPC/Filer</h1>
<b>
    <!--REPLACE_MESSAGE-->
</b>
<form>
    <label>path :
        <select id='pathType' onchange='pathChanged()'>
            <option selected value=''>none</option>
            <option value='persistent'>persistent</option>
            <option value='tmp'>tmp</option>
            <option value='getfilesdir'>getfilesdir</option>
        </select>
    </label>
</form>
<hr>
<ul>
    <!--REPLACE_DIR-->
</ul>
<hr>
<ul>
    <!--REPLACE_FILE-->
</ul>
</body>
</html>
